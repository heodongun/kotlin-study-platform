{
  "chapters": [
    {
      "id": "chapter-1-basics",
      "title": "Chapter 1: 스타쉽 부팅 (Kotlin 기초)",
      "description": "냉동수면에서 깨어난 당신. 고장 난 스타쉽을 수리하기 위해 Kotlin으로 시스템을 복구해야 합니다.",
      "lessons": [
        {
          "id": "basics-1-main",
          "title": "1. 시스템 부팅 신호",
          "story": "당신은 500년 만에 깨어났습니다. 함선 AI 'K'가 응답하지 않습니다. 메인 시스템을 수동으로 부팅하려면 정확한 신호를 보내야 합니다.",
          "content": "모든 Kotlin 프로그램은 `main` 함수에서 시작됩니다.\n\n### 미션\n`main` 함수를 정의하고 `println`을 사용하여 \"System Booting...\"을 출력하세요.",
          "initialCode": "// 1. main 함수를 작성하고\n// 2. \"System Booting...\" 메시지를 출력하세요\n",
          "codeExample": "fun main() {\n    println(\"Hello, World!\")\n}",
          "validation": {
            "type": "contains",
            "pattern": "System Booting...",
            "message": "\"System Booting...\" 문자열을 정확히 출력해야 합니다."
          },
          "order": 1
        },
        {
          "id": "basics-2-variables",
          "title": "2. 에너지 레벨 설정",
          "story": "시스템이 켜졌지만 에너지가 부족합니다. 보조 배터리의 전력을 메인 엔진으로 돌려야 합니다.",
          "content": "데이터를 저장하려면 변수가 필요합니다.\n- `val`: 읽기 전용 (변경 불가)\n- `var`: 변경 가능\n\n### 미션\n1. `energy`라는 이름의 **수정 가능한** 변수(`var`)를 만들고 `50`을 할당하세요.\n2. `systemName`이라는 **수정 불가능한** 변수(`val`)를 만들고 `\"Starship-X\"`를 할당하세요.",
          "initialCode": "fun main() {\n    println(\"System Booting...\")\n    \n    // 여기에 코드를 작성하세요\n    \n}",
          "codeExample": "val name = \"Kotlin\"\nvar level = 10",
          "validation": {
            "type": "regex",
            "pattern": "var\\s+energy\\s*=\\s*50",
            "message": "energy 변수를 var로 선언하고 50을 할당하세요."
          },
          "order": 2
        },
        {
          "id": "basics-3-functions",
          "title": "3. 진단 함수 가동",
          "story": "엔진 출력이 불안정합니다. 상태를 주기적으로 체크하는 진단 모듈이 필요합니다.",
          "content": "코드를 재사용하기 위해 함수를 사용합니다.\n\n### 미션\n`checkStatus`라는 함수를 만들고, 호출될 때마다 \"Status: OK\"를 출력하도록 만드세요.\n그리고 `main` 함수 안에서 이 함수를 호출하세요.",
          "initialCode": "fun main() {\n    println(\"System Booting...\")\n    var energy = 50\n    val systemName = \"Starship-X\"\n    \n    // 여기서 함수를 호출하세요\n    \n}\n\n// 여기에 checkStatus 함수를 정의하세요\n",
          "codeExample": "fun sayHello() {\n    println(\"Hello!\")\n}",
          "validation": {
            "type": "contains",
            "pattern": "Status: OK",
            "message": "checkStatus 함수가 \"Status: OK\"를 출력해야 합니다."
          },
          "order": 3
        },
        {
          "id": "basics-4-control-flow",
          "title": "4. 보안 프로토콜 (if/else)",
          "story": "외부 통신 포트를 열려고 하는데 보안 등급 확인이 필요합니다. 에너지 레벨이 100 미만이면 경고를 띄워야 합니다.",
          "content": "조건문을 사용하여 흐름을 제어합니다.\n\n### 미션\n`energy`가 100 미만이면 \"Warning: Low Energy\"를, 그렇지 않으면 \"Access Granted\"를 출력하는 `if/else` 문을 작성하세요.",
          "initialCode": "fun main() {\n    println(\"System Booting...\")\n    var energy = 50\n    val systemName = \"Starship-X\"\n    \n    checkStatus()\n    \n    // 여기에 if/else 문을 작성하세요\n    \n}\n\nfun checkStatus() {\n    println(\"Status: OK\")\n}",
          "codeExample": "if (score > 90) {\n    println(\"A\")\n} else {\n    println(\"B\")\n}",
          "validation": {
            "type": "contains",
            "pattern": "Warning: Low Energy",
            "message": "에너지가 50이므로 \"Warning: Low Energy\"가 출력되어야 합니다."
          },
          "order": 4
        }
      ]
    },
    {
      "id": "chapter-2-coroutines",
      "title": "Chapter 2: 비동기 통신 (Coroutines)",
      "description": "함선의 통신 모듈이 고장 났습니다. 코루틴을 사용하여 메인 시스템을 멈추지 않고 구조 요청을 보내야 합니다.",
      "lessons": [
        {
          "id": "coroutine-1-launch",
          "title": "1. 백그라운드 작업 (launch)",
          "story": "구조 신호를 보내는 동안 함선 조종이 멈추면 안 됩니다. 별도의 스레드처럼 동작하는 코루틴을 사용해 신호를 보내세요.",
          "content": "`launch`는 결과를 반환하지 않는 코루틴을 시작합니다. 'Fire-and-forget' 방식입니다.\n\n### 미션\n`GlobalScope.launch`를 사용하여 백그라운드에서 \"Sending SOS...\"를 출력하세요.",
          "initialCode": "import kotlinx.coroutines.*\n\nfun main() {\n    println(\"System Active\")\n    \n    // 여기에 코루틴을 작성하세요\n    \n    \n    Thread.sleep(1000) // 코루틴 실행 대기\n}",
          "codeExample": "GlobalScope.launch {\n    println(\"Background Task\")\n}",
          "validation": {
            "type": "contains",
            "pattern": "Sending SOS...",
            "message": "\"Sending SOS...\"를 출력해야 합니다."
          },
          "order": 1
        },
        {
          "id": "coroutine-2-suspend",
          "title": "2. 잠시 멈춤 (suspend & delay)",
          "story": "신호 간섭을 피하기 위해 전송 사이에 1초의 대기 시간이 필요합니다. 스레드를 차단하지 않는 `delay`를 사용하세요.",
          "content": "`suspend` 함수는 코루틴 내부에서만 호출할 수 있으며, 실행을 잠시 중단했다가 재개할 수 있습니다. `delay`는 대표적인 suspend 함수입니다.\n\n### 미션\n코루틴 내부에서 \"Ping\" 출력 -> `delay(1000)` -> \"Pong\"을 출력하세요.",
          "initialCode": "import kotlinx.coroutines.*\n\nfun main() {\n    GlobalScope.launch {\n        // 여기에 코드를 작성하세요\n        \n    }\n    Thread.sleep(2000)\n}",
          "codeExample": "launch {\n    println(\"Start\")\n    delay(500)\n    println(\"End\")\n}",
          "validation": {
            "type": "contains",
            "pattern": "delay(1000)",
            "message": "delay(1000)을 사용해야 합니다."
          },
          "order": 2
        },
        {
          "id": "coroutine-3-async",
          "title": "3. 결과 받기 (async & await)",
          "story": "구조 신호에 대한 응답 코드를 받아와야 합니다. 결과를 반환받을 때는 `async`를 사용합니다.",
          "content": "`async`는 `Deferred` 객체를 반환하며, `await()`를 호출하여 결과를 얻을 수 있습니다.\n\n### 미션\n`async`를 사용하여 \"Signal-X\"라는 문자열을 반환하고, `await()`로 그 값을 받아 출력하세요.",
          "initialCode": "import kotlinx.coroutines.*\n\nfun main() = runBlocking {\n    // 여기에 async 코드를 작성하세요\n    val deferred = \n    \n    val result = deferred.await()\n    println(\"Received: $result\")\n}",
          "codeExample": "val deferred = async {\n    delay(500)\n    \"Result\"\n}\nprintln(deferred.await())",
          "validation": {
            "type": "contains",
            "pattern": "Signal-X",
            "message": "\"Signal-X\"를 반환해야 합니다."
          },
          "order": 3
        },
        {
          "id": "coroutine-4-dispatchers",
          "title": "4. 작업 분배 (Dispatchers)",
          "story": "데이터 분석은 CPU를 많이 쓰고, 통신은 I/O를 많이 씁니다. 적절한 스레드 풀(Dispatcher)에 작업을 배정하세요.",
          "content": "- `Dispatchers.Default`: CPU 집약적 작업 (계산, 정렬)\n- `Dispatchers.IO`: I/O 작업 (파일, 네트워크)\n\n### 미션\n`launch(Dispatchers.IO)`를 사용하여 \"Reading Data...\"를 출력하세요.",
          "initialCode": "import kotlinx.coroutines.*\n\nfun main() = runBlocking {\n    // 여기에 Dispatchers.IO를 사용하는 코루틴을 작성하세요\n    \n}",
          "codeExample": "launch(Dispatchers.IO) {\n    println(\"IO Task\")\n}",
          "validation": {
            "type": "contains",
            "pattern": "Dispatchers.IO",
            "message": "Dispatchers.IO를 사용해야 합니다."
          },
          "order": 4
        }
      ]
    },
    {
      "id": "chapter-3-dsl",
      "title": "Chapter 3: 시스템 설정 (Kotlin DSL)",
      "description": "함선의 방어 시스템을 재설정해야 합니다. 복잡한 설정 파일을 Kotlin DSL로 직관적으로 만들어봅시다.",
      "lessons": [
        {
          "id": "dsl-1-lambda-receiver",
          "title": "1. 수신 객체 지정 람다",
          "story": "방어막 설정을 위해 `ShieldConfig` 객체를 설정해야 합니다. `apply`와 비슷한 패턴을 직접 만들어봅시다.",
          "content": "수신 객체 지정 람다(`T.() -> Unit`)를 사용하면 람다 내부에서 `this`로 객체에 접근할 수 있습니다.\n\n### 미션\n`configureShield` 함수를 완성하여 `ShieldConfig`의 `active`를 `true`로 설정하세요.",
          "initialCode": "class ShieldConfig {\n    var active = false\n}\n\nfun configureShield(init: ShieldConfig.() -> Unit): ShieldConfig {\n    val config = ShieldConfig()\n    config.init() // 람다 실행\n    return config\n}\n\nfun main() {\n    val shield = configureShield {\n        // 여기서 active를 true로 설정하세요\n        \n    }\n    println(\"Shield Active: ${shield.active}\")\n}",
          "codeExample": "html {\n    body { ... }\n}",
          "validation": {
            "type": "contains",
            "pattern": "active = true",
            "message": "active 속성을 true로 설정해야 합니다."
          },
          "order": 1
        },
        {
          "id": "dsl-2-extension",
          "title": "2. 확장 함수로 기능 추가",
          "story": "기존 `String` 클래스에 암호화 기능을 추가하고 싶습니다. 상속 없이 기능을 확장해보세요.",
          "content": "확장 함수(Extension Function)를 사용하면 외부 라이브러리나 기본 클래스에 메서드를 추가할 수 있습니다.\n\n### 미션\n`String` 클래스에 `encrypt`라는 확장 함수를 만들고, 문자열 뒤에 \"_SECURE\"를 붙여 반환하게 하세요.",
          "initialCode": "// 여기에 확장 함수를 작성하세요\n\n\nfun main() {\n    val message = \"Attack\"\n    println(message.encrypt())\n}",
          "codeExample": "fun String.addHello() = this + \" Hello\"",
          "validation": {
            "type": "contains",
            "pattern": "fun String.encrypt()",
            "message": "String.encrypt 확장 함수를 정의해야 합니다."
          },
          "order": 2
        }
      ]
    },
    {
      "id": "chapter-4-advanced",
      "title": "Chapter 4: 미래 기술 (Advanced Kotlin)",
      "description": "외계 기술을 분석하여 함선을 업그레이드합니다. Kotlin의 고급 기능을 활용해 효율을 극대화하세요.",
      "lessons": [
        {
          "id": "adv-1-dataclass",
          "title": "1. 데이터 캡슐 (Data Class)",
          "story": "스캔한 외계 생명체의 정보를 저장해야 합니다. `toString`, `equals` 등을 자동으로 만들어주는 데이터 클래스를 사용하세요.",
          "content": "`data class`는 데이터를 저장하는 데 최적화된 클래스입니다.\n\n### 미션\n`Alien`이라는 데이터 클래스를 정의하고 `name`(String)과 `level`(Int) 속성을 가지게 하세요.",
          "initialCode": "// 여기에 data class를 정의하세요\n\n\nfun main() {\n    val alien = Alien(\"Zorg\", 99)\n    println(alien)\n}",
          "codeExample": "data class User(val name: String, val age: Int)",
          "validation": {
            "type": "contains",
            "pattern": "data class Alien",
            "message": "Alien을 data class로 정의해야 합니다."
          },
          "order": 1
        },
        {
          "id": "adv-2-null-safety",
          "title": "2. 공허의 존재 (Null Safety)",
          "story": "분석 데이터 중 일부는 손상되어 존재하지 않을 수 있습니다(Null). Kotlin의 Null 안전성을 활용해 시스템 다운을 막으세요.",
          "content": "Kotlin은 컴파일 시점에 Null 가능성을 체크합니다. `?.` (Safe Call)과 `?:` (Elvis Operator)를 사용하세요.\n\n### 미션\n`name`이 Null일 수 있는 변수 `unknown`의 길이를 안전하게 출력하고, Null이면 0을 출력하세요.",
          "initialCode": "fun main() {\n    val unknown: String? = null\n    \n    // 여기에 코드를 작성하세요 (Elvis 연산자 사용)\n    val length = \n    \n    println(\"Length: $length\")\n}",
          "codeExample": "val len = text?.length ?: 0",
          "validation": {
            "type": "contains",
            "pattern": "?: 0",
            "message": "Elvis 연산자(?:)를 사용하여 기본값 0을 제공해야 합니다."
          },
          "order": 2
        }
      ]
    }
  ]
}